<!DOCTYPE html>
<html>
  <!-- include A-Frame -->
  <!-- <script src="https://aframe.io/releases/0.6.1/aframe.min.js"></script> -->
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <!-- include ar.js for A-Frame -->
  <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.5.0/aframe/build/aframe-ar.js"></script>
  <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js">  </script>
  <script src="https://rawgit.com/oscarmarinmiro/aframe-video-controls/master/dist/aframe-video-controls.min.js"></script>
  <script>
      THREEx.ArToolkitContext.baseURL = 'https://raw.githack.com/jeromeetienne/ar.js/master/three.js/'
  </script>
  <body style="margin: 0px; overflow: hidden;">

    <a-scene embedded arjs
      vr-mode-ui="enabled: true"
      embedded
      arjs='sourceType: webcam; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960; debugUIEnabled: false;'
    >
      <a-assets>
        <img id="texture" texture #texture src="/icon/favicon.svg">
      </a-assets>
      
      <!-- Basic box. -->
      <a-box color="tomato" depth="2" height="4" width="0.5"></a-box>
      
      <!-- Textured box. -->
      <a-box src="#texture"></a-box>

      <a-box
        color="#0095DD"
        position="0 1 0"
        rotation="20 40 0">
      </a-box>
      <a-sky color="#DDDDDD"></a-sky>

      <a-camera 
          gps-camera="gpsMinDistance: 5; gpsMaxDistance: 150; simulateLatitude: 45.5646860505055; simulateLongitude: -73.61267814618893;" 
          position="0 0 -1"
          rotation-reader  
          wasd-controls='acceleration: 1300'  
          arjs-look-controls='smoothingFactor: 0.1'>
          <a-cursor id="cursor" color="yellow"></a-cursor>
      </a-camera>





      <!-- Copyright (c) 2023 8th Wall, Inc. -->
      <!-- body.html is optional; elements will be added to your html body after app.js is loaded. -->
      <!-- Add the tap-place component to the scene so it has an effect -->

      xrextras-gesture-detector
      landing-page
      xrextras-loading
      xrextras-runtime-error
      renderer="colorManagement: true"
      xrweb>
      <a-assets>
        <a-asset-item id="car" src="assets/car.glb"></a-asset-item>
        <a-asset-item id="car-transparent" src="/assets/car-transparent.glb"></a-asset-item>
        <img id="icon" src="/assets/icon/favicon.png">
      </a-assets>
      <!-- The raycaster will emit mouse events on scene objects specified with the cantap class 
      <a-camera
        id="camera"
        position="0 8 0"
        cursor="fuse: false; rayOrigin: mouse;">
      </a-camera>-->

      <a-entity 
        id="cursor"
        tap-place-cursor
        gltf-model="#car-transparent"
        scale="2 2 2"
        reflections="type: static">
          <a-plane
            rotation="-90 0 0"
            scale="1.6 3.3 1"
            material="src: #icon; opacity: 0.5; roughness: 0.8; metalness: 0;">
          </a-plane>
      </a-entity>

      <a-entity
        light="
          type: directional;
          intensity: 0.8;
          castShadow: true;
          shadowMapHeight:2048;
          shadowMapWidth:2048;
          shadowCameraTop: 20;
          shadowCameraBottom: -20;
          shadowCameraRight: 20;
          shadowCameraLeft: -20;
          target: #model"
        xrextras-attach="target: model; offset: 8 15 4"
        position="1 4.3 2.5"
        shadow>
      </a-entity>
      <a-light type="ambient" intensity="0.5"></a-light>
      <a-entity
        id="model"
        gltf-model="#car"
        scale="2 2 2"
        visible="false"
        shadow="receive: false"
        xrextras-hold-drag
        xrextras-two-finger-rotate
        xrextras-pinch-scale
        reflections="type: realtime">
      </a-entity>
      <!-- Adding the cantap class allows the ground to be clicked -->
      <a-box
        id="ground"
        scale="1000 2 1000"
        position="0 -1 0"
        material="shader: shadow; transparent: true; opacity: 0.4"
        shadow>
      </a-box> 
    </a-scene>




  </body>
</html>